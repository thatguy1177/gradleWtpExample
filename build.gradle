import WtpFix

apply plugin: 'eclipse'

allprojects {
	repositories {
		mavenCentral()
	}
}

subprojects {
	apply plugin: 'java'
	apply plugin: 'eclipse-wtp'

	version = '1.0'
	group = 'org.gradletest'

	project.afterEvaluate {
		if (project.plugins.hasPlugin('war' )) {
			eclipse.wtp.component.file.withXml {
				WtpFix.customizeDeployment(project, it.asNode())
			}
		} else {
			eclipse.classpath.file.withXml {
				WtpFix.removeDeployment(it.asNode())
			}
		}
	}
}
